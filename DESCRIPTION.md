# Интерфейсы
## IVector

[Интерфейс для вектора](https://github.com/ThinkingFrog/IVector/blob/main/include/IVector.h) - элемент n-мерного евклидова пространства.

### Аксиомы типа:
- элементы - `double` - не могут быть NaN, Inf, -Inf
- размерность пространства, которому принадлежит вектор, не может быть 0

Аксиомы должны выполняться в любой момент времени, после выполнения любой операции над вектором.

### Описание интерфейса:

|Метод: `createVector` | |
|---|---|
|Описание:| Создаёт экземпляр вектора.|
|Параметры: | `dim` - размерность вектора,|
|  | `ptr_data` - указатель на массив double, которые определяют элементы вектора. Его размер равен `dim`. |
| Возвращаемое значение:| Указатель на экзепляр вектора, или nullptr, если не удалось создать. Подробная информация пишется в логгер. |

| Метод: `copyInstance` | |
|---|---|
| Описание: | Копирует представление одного вектора в другой, если это допустимо. Допустимостью является равенство объёма памяти и не пересечения памяти выделленной под объекты.|
| Параметры: | `dest` - указатель на вектор, куда совершается копирование, |
| | `src` - указатель на вектор , откуда совершается копирование. Должны является валидными векторами, иначе поведение неопределено. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `NULLPTR_ERROR`, `MEMORY_INTERSECTION`, `MISMATCHING_DIMENSIONS`. |

| Метод: `moveInstance` | |
|---|---|
| Описание: | Копирует представление одного вектора в другой, если это допустимо, и удаляет источник данных. Допустимостью является равенство объёма памяти и не пересечения памяти выделленной под объекты.|
| Параметры: | `dest` - указатель на вектор, куда совершается копирование, |
| | `src` - указатель на вектор , откуда совершается копирование. Должны является валидными векторами, иначе поведение неопределено. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `NULLPTR_ERROR`, `MEMORY_INTERSECTION`, `MISMATCHING_DIMENSIONS`. |

| Метод: `sizeAllocated` | |
|---|---|
| Описание: | Возвращает количество байт выделенных на хранение вектора как единого блока памяти. |
| Возвращаемое значение: | Количество байт, которое занимает экземпляр вектора. |

#### Факт того, что тип реализует опреации `copyInstance`, `moveInstance` говорит о том, что экземпляры этого типа можно копировать и перемещать как сырую память размером `sizeAllocated` байтов.

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию вектора, у которого вызван метод. |
| Возвращаемое значение: | Указатель на экзепляр вектора, или `nullptr`, если не удалось создать. Подробная информация пишется в логгер. |

| Метод: `getData` | |
|---|---|
| Описание: | Возвращает указатель на данные об элементах вектора. |
| Возвращаемое значение: | Указатель на массив `double` - элементы вектора. |

| Метод: `setData` | |
|---|---|
| Описание: | Устанавливает новые значения элементов вектора. |
| Параметры: | `dim` - количество элементов массива, |
|  | `ptr_data` - указатель на массив double, которые определяют элементы вектора. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `NULLPTR_ERROR`, `MISMATCHING_DIMENSIONS` или информацию о невалидности элементов (`NOT_NUMBER`, `INFINITY_OVERFLOW`). |

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает логгер для  вектора. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибке. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `NULLPTR_ERROR`, `IO_ERROR` или `FILE_NOT_FOUND`. |

| Метод: `getCord` | |
|---|---|
| Описание: | Возвращает указатель на данные об элементах вектора. |
| Параметры: | `index` - индекс элемента вектора, |
|  | `val` - ссылка на `double` - контейнер под элемент вектора. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `INDEX_OUT_OF_BOUND`. |

| Метод: `setCord` | |
|---|---|
| Описание: | Возвращает указатель на данные об элементах вектора. |
| Параметры: | `index` - индекс элемента вектора, |
|  | `val` - новое значение элемента. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `INDEX_OUT_OF_BOUND`. |

| Метод: `scale` | |
|---|---|
| Описание: | Увеличивает каждую компоненту вектора в `multiplier` раз. |
| Параметры: | `multiplier` - множитель. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть информацию о невалидности элементов (`NOT_NUMBER`, `INFINITY_OVERFLOW`). |

| Метод: `getDim` | |
|---|---|
| Описание: | Возвращает размерность вектора. |
| Возвращаемое значение: | Размерность вектора. |

| Метод: `inc` и `dec` | |
|---|---|
| Описание: | Приращивает к вектору другой вектор. Аналоги `+=` и `-=`. |
| Параметры: | `op` - вектор, который будет приращён к исходному, у которого вызван метод. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `NULLPTR_ERROR`, `MISMATCHING_DIMENSIONS` или информацию о невалидности элементов получаемого вектора (`NOT_NUMBER`, `INFINITY_OVERFLOW`). |

| Метод: `add` и `sub` | |
|---|---|
| Описание: | Создаёт новый вектор который является суммой/разностью двух. |
| Параметры: | `op1` и `op2` - вектора слагаемые. |
| Возвращаемое значение: | Новый вектор являющийся суммой или `nullptr` в случае возникновения ошибки. Подробная информация пишется в логгер. |

| Метод: `dot` | |
|---|---|
| Описание: | Вычисляет скалярное произведение двух векторов. |
| Параметры: | `op1` и `op2` - вектора - аргументы скалярного произведения. |
| Возвращаемое значение: | Новый вектор являющийся суммой или `nullptr` в случае возникновения ошибки. Подробная информация пишется в логгер. |

| Метод: `equals` | |
|---|---|
| Описание: | Сравнивает вектора с заданной точностью и заданной метрикой. |
| Параметры: | `op1` и `op2` - вектора, которые будут сравниваться. |
| | `n` - норма, по которой будет измерена разность векторов. |
| | `tol` - точность, по которой будут сравниваться вектора. |
| Возвращаемое значение: | `true`, если вектора равны и `false`, если не равны. В случае ошибки также возвращается `false`. Подробная информация пишется в логгер. |

| Метод: `norm` | |
|---|---|
| Описание: | Вычисляет норму вектора. |
| Параметры: | `n` - норма. |
| Возвращаемое значение: | Значение нормы или тихий NaN, в случае ошибки. Подробная информация пишется в логгер. |

| Метод: `applyFunction` | |
|---|---|
| Описание: | Изменяет компоненты вектора согласно переданной функции. |
| Параметры: | `fun` - функция действующая из R -> R (`double(double)`), определяющая изменение каждой компоненты: `el = fun(el)`. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть информацию о невалидности элементов получаемого вектора (`NOT_NUMBER`, `INFINITY_OVERFLOW`). |

| Метод: `foreach` | |
|---|---|
| Описание: | Выполняет процедуру над каждым компонентом вектора. |
| Параметры: | `fun` - процедура (`void(double)`), определяющая обработку каждой компоненты вектора. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. |

| Перечисление: `NORM` | |
|---|---|
| Описание: | Описывает нормы, которые поддердиваются. |
| Элементы: | `CHEBYSHEV` - бесконечная p-норма. Чебышевская норма. |
| | `FIRST` - первая p-норма. Манхэттенская норма. |
| | `SECOND` - вторая p-норма. Евклидова норма. |
| | `AMOUNT` - количество норм в перечислении. |

### Замечания по реализации:

- Реализация вектора должна быть подобна массиву примитивов - один непрерывный блок памяти содержащий элементы вектора и метаинформацию о векторе. Размер блока клиентский код должен иметь возможность получить из метода `sizeAllocated`.
- Деструктор чисто виртуальный намеренно, чтобы подчеркунть абстарктность типа `IVector`

## ISet

[Интерфейс для контейнера - множество векторов](https://github.com/ThinkingFrog/IVector/blob/main/include/ISet.h), которые хранятся в хронологической последовательности.


### Описание интерфейса:

|Метод: `createSet` | |
|---|---|
|Описание:| Создаёт экземпляр множества.|
| Возвращаемое значение:| Указатель на экзепляр множества, или nullptr, если не удалось создать. Подробная информация пишется в логгер. |

| Метод: `clone` | |
|---|---|
| Описание: | Создаёт копию множества, у которого вызван метод. |
| Возвращаемое значение: | Указатель на экзепляр множества, или `nullptr`, если не удалось создать. Подробная информация пишется в логгер. |

| Метод: `setLogger` | |
|---|---|
| Описание: | Устанавливает логгер для  вектора. Этот логгер будут использовать остальные методы, чтобы писать подробную информацию об ошибке. |
| Параметры: | `logger` - указатель на логгер. |
| Возвращаемое значение: | Код ошибки. `SUCCESS` в случае успеха. Может вернуть `NULLPTR_ERROR`, `IO_ERROR` или `FILE_NOT_FOUND`. |

### Замечания по реализации:
- Храним не сами вектора, а только существенную часть вектора - массив  элементов.
- Изменение размера контейнера при нехватке выделенной памяти выполняем скрыто от клиентского кода во время выполнения метода `insert`. В связи с реалокациями не можем хранить реализацию интерфейса в виде единого блока памяти (как в случае с вектором), но сами вектора хранящиеся в контейнере - можем.
- Опять же в связи с реалокациями скрытыми от пользователя, не можем возвращать shallow копии векторов - получение ресурса сопровождается созданием нового вектора или копированием данных в некоторый буфферный вектор (касается методов `get...`, `findFirst...`, метода `get...` итератора).
- Деструктор чисто виртуальный намеренно, аналогично `IVector`

## ICompact

[Интерфейс для n-мерного замкнутого параллелепипеда - компакта](https://github.com/ThinkingFrog/IVector/blob/main/include/ICompact.h) в n-мерном евклидовом пространстве.

Фактически представляет собой сетку, которая заданна двумя векторами, содержащими информацию о границах параллелепипеда, и вектором с целочисленными компонентами ([Мультииндекс](https://github.com/ThinkingFrog/IVector/blob/main/include/IMultiIndex.h)), который задаёт число разбиений сетки по каждой оси.

### Замечания по интерфейсу:
- получение ресурса аналогично `ISet`: имеется 2 варианта по семантике получения ресурса
- деструктор чисто виртуальный намеренно, аналогично `IVector`
- метод `createCompactSpan` создаёт наименьший компакт, содержащий переданные 2 компакта
- конкретный узел сетки можно получить передав в соответствующий метод (`getVectorzCopy` или `getVectorCoords`) мультииндекс этого узла

## IProblem, IDiffProblem

[Интерфейс целевой фукнции](https://github.com/ThinkingFrog/IVector/blob/main/include/IProblem.h) и [дифференцируемой целевой фукнции](https://github.com/ThinkingFrog/IVector/blob/main/include/IDiffProblem.h).

Определяется двумя компактами: область определения аргумента и подмножество параметрического пространства.

### Замечания по интерфейсу:
- значения функции и её производные вычисляются в 2 этапа: фиксируется методом `set...` параметры или аргументы, затем вычисляется значение или производная по параметру или аргументу
- метод `derivativeBy...` вычисляет частную производную по аргументу. Частная производная определяется по мультииндексу (сколько раз по какой оси брать производную)
